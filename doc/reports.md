# Отчеты

отчет — это отчет. за определением  википедия.

в сущности хранится его id, время отчета, тип, `отдел` (не реализовано) и сам отчет в json формате.

фактически, отчет может быть произвольного формата, главное указать его тип, время отчета, и саму структуру.

## типы отчетов
### x-отчет

x-отчет — фактически, тот же самый х-отчет, какой бывает в обычных кассах, без аналогов и ГМО. х-отчет показывает, сколько было проведено заказов через кассу за открытый шифт, как они были оплачены, средний сек по стоимости и по позициям. 
```json
{
    "daily_report_id":0, // номер отчета (не id!)
    "desk_id":0, // id деска, с которого были собраны данные
    "report_time":0, // время проведения отчета (время
                     // вписания отчета в базу и время
                     // реального отчета имеет право
                     // не совпадать)
    "start_time":0, // время открытия шифта
    "opened_id":0, // id работника, который открыл шифт
    "amount":{ // сумма прибыли по определенным типам оплаты
               // костыль, надо перевести с названий id
               // типов оплаты
        "cash":0, // наличные
        "card_transfer":0, // перевод сбербанк онлайн
        "acquiring": 0, // эквайринг (оплата картой)
        "bitcoin": 0, // биткоин
        "etherium": 0 // эфириум
    },
    "pf_amount":{ //костыль. надо бы вообще к хуям убрать
        "cash":0
    },
    "total_amount":0, // сумма всех принятых денег (cчитается как sum(this.amount) )
    "total_bills":0, // сумма заказов в ед.
    "average_bill_amount": 0, // средний сек по стоимости
    "average_bill_value": 0 // средний чек по позициям в заказе
}
```

### z-отчет

z-отчет точно так же похож на обычный z-отчет в обычных кассах. этот отчет может формироваться **только** когда шифт закрыт. отчет показывает то же самое, что и х-*, а так же время закрытия, кто закрыл

```json
{
    "report_time":0,
    "start_time":0,
    "close_time":0, // время закрытия
    "opened_id":0,
    "closed_id":0, // id работника, кто закрыл
    "amount":{
        "cash":0,
        "card_transfer":0,
        "acquiring": 0,
        "bitcoin": 0,
        "etherium": 0
    },
    "pf_amount":{
        "cash":0
    },
    "discount_cost":0,
    "total_amount":0,
    "total_bills":0,
    "average_bill_amount": 0,
    "average_bill_value": 0,
    "encashment":0, // не используется. подразумевается,
                    // что из кассы можно забрать наличные.
    "cash_deposit":0 // не используется. подразумевается,
                     // что в кассе может остаться наличка.
}
```
