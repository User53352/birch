# VegangaDB v2.0

VegangaDB — это база узкого назначения, специализированая под хранение определенных сущностей сервиса.

Задача базы — хранить исключительно сущности, предназначеные для нее. хранение, например, документов, расписаний, контактов и пр. отводится другим базам.

## сущности
для каждой сущности в базе находится своя таблица. сущности зависимы друг от друга, например, позиция в таблице меню не может быть отделена от отдела.

### отделы
отделы — фактически, компании, работающие с данной базой.
### кассы
касса — объект, с которым взаимодействуют работники. касса генерирует новые закаказы, и уменьшает позиции на складе
### скидки
(сейчас не реализовано) набор из определенных правил, согласно которым может проводиться скидка. подробнее о теории можно прочитать [вот эту страничку](./discounts.md). там расписан процесс создания правил, но пока что скидка реализована через интерфейс на [Julia](https://github.com/xelaj/julia), и довольно криво.
### инвойсы
(сейчас не реализовано в полной мере) инвойс — список из заказов, привязаных к определенному покупателю. позиции, записанные в инвойсе могут быть не оплачеными, но если производится оплата по инвойсу, то в полную его стоимость.
### кухни
кухня — объект, который может обработать ту или иную позицию. каждая кухня прикреплена к своему отделу
### позиции (или меню)
список из позиций, которые можно продавать. каждая позиция прикреплена к своему отделу (в данный момент, каждая позиция прикреплена еще и к своей кухне, но это пока что ни на что не влияет)
### заказы (чеки)
заказ (или чек) — список из позиций, которые были заказаны (но не обязательно оплачены). заказ фактически является основной сущностью, которая хранится в базе
### методы оплаты
список из методов оплаты. фактически, не привязаны ни к чему, являются парами ключ-значение (id метода оплаты —> его обозначение) например, заказ оплачен типом с id=10. 10="наличные" (сущность вообще сделана для того,что бы уменьшить объем бд, ибо 400 ячеек с строкой "наличные" могут сильно убить память)
### отчеты
отчет — сущность, которая имеет привязку к отделу, тип отчета, и сам отчет в json-формате. на данный момент существует два типа отчетов — X и Z. об отчетах можно узнать подробнее [здесь](./reports.md)
### шифты
шифт — аналог кассовой смены за исключением нескольких различий. подробнее можно посмотреть [вот тут](./reports.md). вкратце — шифт можно держать открытым хоть две секунды, хоть неделю, де-факто, это некий промежуток времени, на основе которого создаются отчеты, привязываются заказы и собирается статистика. **шифт не является операционным днем!** это просто промежуток времени.
### работники
список из работников. каждый работник мож
### покупатели
(не реализовано) буквально, карточка покупателя, вполедствии есть план сделать скидочную систему постояннум покупателям. сейчас в процессе, в базе этой сущности нет